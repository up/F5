javascript:%20(function(win){var%20interval=1000,method="Last-Modified",title='[F5]%20'+document.title,iframeId='F5Iframe',src=window.location.href,F5win,F5WinHead,F5WinBody,iframe,script,getDimentions,setDimentions,scriptText,SBContent,SBMethod,hasInnerText;getDimentions=function(){var%20width,height;if(document.body&&document.body.offsetWidth){width=document.body.offsetWidth;height=document.body.offsetHeight;}%20if(document.compatMode==='CSS1Compat'&&document.documentElement&&document.documentElement.offsetWidth){width=document.documentElement.offsetWidth;height=document.documentElement.offsetHeight;}%20if(window.innerWidth&&window.innerHeight){width=window.innerWidth;height=window.innerHeight;}%20return[width,height];};setDimentions=function(){var%20iframe=F5win.document.getElementById(iframeId),dim=getDimentions();iframe.style.width=dim[0];iframe.style.height=dim[1];};function%20F5(win,iframeId,method,interval){var%20timer,len,checksum,compare,get,getfiles,activate,deactivate,add,getScrollXY,_SB_,checksums=[],count=0,pending=false,running=false,files=[];_SB_=function(files){var%20position={top:70,right:0},delay=5,waitBeforeHiding=500,contentWidth=0,labelWidth=35,timer,SB,SBWrapper,SBLabel,SBContentWrapper,SBTitle,label='&nbsp;<b>F5</b>&nbsp;',title='<div%20id="SBTitle"%20style="margin:0"></div>',content='<div%20id="SBContent"></div>',divstyle='display:inline-block;color:white;padding:%2010px%205px;',body=document.querySelector('body'),checked=false;function%20setBorderRadius(y,x){var%20radius='5px;';return'-webkit-border-'+y+'-'+x+'-radius:%20'+radius+'-moz-border-radius-'+y+x+':%20'+radius+'border-'+y+'-'+x+'-radius:%20'+radius;}%20function%20setBoxShadow(){var%20boxshadow='-2px%202px%2010px%20#222;';return'-webkit-box-shadow:%20'+boxshadow+'-moz-box-shadow:%20'+boxshadow+'box-shadow:%20'+boxshadow;}%20function%20newDiv(id){var%20div=document.createElement('div');if(id!==null){div.id=id;}%20return%20div;}%20function%20slide(num){SBWrapper.style.right=parseInt(SBWrapper.style.right,10)+num+"px";}%20function%20show(){clearTimeout(timer);if(parseInt(SBWrapper.style.right,10)<0){timer=setTimeout(function(){show();},delay);slide(10);}}%20function%20moveBack(){clearTimeout(timer);if(parseInt(SBWrapper.style.right,10)>-contentWidth){timer=setTimeout(function(){moveBack();},delay);slide(-10);}}%20function%20hide(){clearTimeout(timer);timer=setTimeout(function(){moveBack();},waitBeforeHiding);}%20function%20refreshLayout(){contentWidth=SBWrapper.offsetWidth+15;contentWidth+=10-(contentWidth%25%2010);SBWrapper.style.width=contentWidth+labelWidth+"px";SBWrapper.style.right=-contentWidth+"px";SBContentWrapper.style.width=contentWidth-labelWidth+7+"px";SBWrapper.style.visibility="visible";}%20function%20change(obj,num){if(!obj.checked){files[num][2]=false;}else{files[num][2]=true;}}%20function%20toggleAll(){SBContent=document.querySelector('#SBContent');var%20inputs=SBContent.getElementsByTagName('input'),i=0;checked=checked?false:true;for(;i<inputs.length;i+=1){inputs[i].checked=checked;change(inputs[i],i);ext=inputs[i].nextSibling.innerHTML.toLowerCase();if(inputs[i].checked){inputs[i].nextSibling.style.color="#cea500";}else{if(/\.css/.test(ext)){inputs[i].nextSibling.style.color="#DDD";}else%20if(/\.js/.test(ext)){inputs[i].nextSibling.style.color="#FFF";}else{inputs[i].nextSibling.style.color="#FFFFCC";}}}}%20function%20createSidebarContent(files){var%20i=0,span,input,label,select,options,option,para,ext;function%20addElement(tagname,parent){parent.appendChild(document.createElement(tagname));}%20SBContent.innerHTML='';SBTitle=document.querySelector('#SBTitle');if(files.length>10){SBContent.style.width='500px';}%20for(;i<files.length;i+=1){span=document.createElement('span');span.style.cssText="display:inline-block;white-space:nowrap;";input=document.createElement('input');input.id="file_"+i;input.type="checkbox";input.value=files[i][1];label=document.createElement('label');label.htmlFor="file_"+i;label.style.cssText="cursor:pointer;%20margin-right:12px";ext=files[i][1].toLowerCase();if(/\.css/.test(ext)){label.style.cssText+="color:#DDD;";}else%20if(/\.js/.test(ext)){label.style.cssText+="color:#FFF";}else{label.style.cssText+="color:#FFFFCC";}%20label.innerHTML=files[i][1];span.appendChild(input);span.appendChild(label);SBContent.appendChild(span);if(files.length<=10&&i<files.length-1){addElement('br',SBContent);}}%20para=document.createElement('p');para.style.cssText="text-align:right;%20margin:%2010px%200";para.innerHTML=''+'<a%20href="https://github.com/up/F5"%20'+'style="'+'%20%20background-color:%20#666;display:inline-block;padding:2px%204px;'+'%20%20color:#E8E8E8;text-decoration:none;font-size:%200.7em;%20'+'">F5%20@%20github</a>';SBContent.appendChild(para);select=document.createElement('select');select.id="method";select.style.cssText="";options=[["Last-Modified","Last-Modified"],["Content-Length","Content-Length"]];for(i=0;i<options.length;i+=1){option=document.createElement('option');option.value=options[i][0];option.innerHTML="Check%20by%20"+options[i][1];select.appendChild(option);}%20SBTitle.appendChild(select);if(files.length<=10){addElement('br',SBTitle);}%20select=document.createElement('select');select.id="interval";select.style.cssText="";options=[1000,2000,3000,5000,10000];for(i=0;i<options.length;i+=1){option=document.createElement('option');option.value=options[i][0];option.innerHTML="Interval%20"+options[i];select.appendChild(option);}%20SBTitle.appendChild(select);SBTitle.innerHTML+='<button%20onclick="F5.toggleAll()">Toggle</button>';addElement('br',SBTitle);addElement('br',SBTitle);refreshLayout();}%20SB=newDiv(null);SB.style.cssText=''+'font-family:arial;'+'position:absolute;right:'+position.right+'px;top:'+position.top+'px;'+'z-index:%201000;';body.appendChild(SB);SBWrapper=newDiv('SBWrapper');SBWrapper.onmouseover=show;SBWrapper.onmouseout=hide;SBWrapper.style.cssText=''+'position:absolute;right:0;top:0;'+'visibility:hidden;';SB.appendChild(SBWrapper);SBLabel=newDiv(null);SBLabel.style.cssText=''+%20divstyle+%20setBorderRadius('top','left')+%20setBorderRadius('bottom','left')+%20setBoxShadow()+'vertical-align:top;'+'background-color:#222;';SBLabel.innerHTML=label;SBWrapper.appendChild(SBLabel);SBContentWrapper=newDiv(null);SBContentWrapper.style.cssText=''+%20divstyle+%20setBorderRadius('bottom','left')+%20setBoxShadow()+'padding-top:17px;padding-left:20px;'+'background-color:#222;';SBContentWrapper.innerHTML=title+content;SBWrapper.appendChild(SBContentWrapper);body.style.overflowX='hidden';createSidebarContent(files);window.F5.toggleAll=toggleAll;window.F5.change=change;};compare=function(){if(files[count][2]&&arguments[0]){var%20iframe,positions;pending=true;if(checksums[count]===undefined){checksums[count]=checksum;}else%20if(checksums[count]!==checksum){checksums[count]=checksum;iframe=document.getElementById(iframeId);positions=getScrollXY();iframe.contentWindow.location.reload(true);iframe.onload=function(){iframe.contentWindow.scrollTo(positions[0],positions[1]);};}}%20count++;if(count<len){get();}else{pending=false;count=0;}};getScrollXY=function(){var%20posX=0,posY=0,iframe=document.getElementById(iframeId),iWin=iframe.contentWindow,iDoc=iWin.document,iBody=iDoc.body,iElem=iDoc.documentElement;if(typeof(iWin.pageYOffset)==='number'){posY=iWin.pageYOffset;posX=iWin.pageXOffset;}else%20if(iBody&&(iBody.scrollLeft||iBody.scrollTop)){posY=iBody.scrollTop;posX=iBody.scrollLeft;}else%20if(iElem&&(iElem.scrollLeft||iElem.scrollTop)){posY=iElem.scrollTop;posX=iElem.scrollLeft;}%20return[posX,posY];};get=function(){if(files[count][2]){var%20req=new%20XMLHttpRequest();req.onreadystatechange=function(){if(req.readyState===4&&req.status===200){switch(method){case"Last-Modified":checksum=req.getResponseHeader("Last-Modified").toString();break;case"Content-Length":checksum=req.getResponseHeader("Content-Length");break;}%20compare(true);}};req.open("HEAD",files[count][0]+"?"+new%20Date().getTime(),true);req.send(null);}else{compare(false);}};getfiles=function(){var%20i,href,src,iframe=document.getElementById(iframeId),doc=iframe.contentWindow.document,stylesheets=doc.styleSheets,scripts=doc.getElementsByTagName('script'),imgs=doc.getElementsByTagName('img'),img_ext='png%20gif%20svg%20jpg%20jpeg',ext,hash={};for(i=0;i<stylesheets.length;i++){href=stylesheets[i].href;if(href!==''&&href!==null&&href.substring(href.lastIndexOf('.')+1).toLowerCase()==='css'){add(href);}}%20for(i=0;i<scripts.length;i++){src=scripts[i].src;if(src!==''&&src!==null&&src.substring(src.lastIndexOf('.')+1).toLowerCase()==='js'){add(src);}}%20for(i=0;i<imgs.length;i++){src=imgs[i].src;ext=src.substring(src.lastIndexOf('.')+1).toLowerCase();if(src!==''&&img_ext.indexOf(ext)!==-1){hash[src]=true;}}%20for(url%20in%20hash){add(url);}%20return%20files;};activate=function(){files=getfiles();_SB_(files);len=files.length;timer=win.setInterval(function(){if(!pending){get();}},interval);running=true;};deactivate=function(){win.clearInterval(timer);running=true;};add=function(file){files.push([file,file.substring(file.lastIndexOf('/')+1),false]);};win.setTimeout(function(){activate();SBContent.onclick=function(){var%20inputs=SBContent.getElementsByTagName('input'),i=0,ext;for(;i<inputs.length;i+=1){files[i][2]=inputs[i].checked;ext=inputs[i].nextSibling.innerHTML.toLowerCase();if(inputs[i].checked){inputs[i].nextSibling.style.color="#cea500";}else{if(/\.css/.test(ext)){inputs[i].nextSibling.style.color="#DDD";}else%20if(/\.js/.test(ext)){inputs[i].nextSibling.style.color="#FFF";}else{inputs[i].nextSibling.style.color="#FFFFCC";}}}};SBMethod=document.querySelector('#method');SBMethod.onchange=function(){method=this.options[this.selectedIndex].value;};var%20SBInterval=document.querySelector('#interval');SBInterval.onchange=function(){interval=this.options[this.selectedIndex].value;};},100);}%20hasInnerText=(document.getElementsByTagName("body")[0].innerText!==undefined)?true:false;scriptText='('+F5.toString()+'(window,%20"'+iframeId+'",%20"'+method+'",%20'+interval+'));';F5win=window.open();F5WinHead=F5win.document.head;F5WinBody=F5win.document.body;F5WinHead.innerHTML=''+'<title>'+title+'</title>'+'<style>'+'body{%20margin:0;%20overflow:hidden;}%20'+'iframe{border:none}%20'+'select,%20button%20{margin-left:7px;margin-top:3px;font-size:0.8em;}%20'+'button%20{margin-left:8px;}%20'+'option%20{padding:%202px%203px%200px;}'+'</style>';iframe=document.createElement('iframe');iframe.id=iframeId;iframe.src=src;F5WinBody.appendChild(iframe);script=document.createElement('script');script.type="text/javascript";if(!hasInnerText){script.textContent=scriptText;}else{script.innerText=scriptText;}%20var%20completeIVal=setInterval(function(){if(iframe.contentWindow.document.readyState==='complete'){F5WinBody.appendChild(script);clearInterval(completeIVal);}},100);setDimentions();if(window.focus){F5win.focus();}%20F5win.onresize=setDimentions;document.close();F5win.F5={};F5win.F5.activate=activate;F5win.F5.deactivate=deactivate;F5win.F5.running=running;})(window);