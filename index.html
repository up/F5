<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>F5 by up</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>[F5]</h1>
        <p>Live reload bookmarklet</p>
        <br/><br/>

        <ul>
          <li><a href="https://github.com/up/F5/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/up/F5/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/up/F5">View on <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>

        <h3>Tool for Web Developers and Designers</h3>
        <p>
	        Tired to constantly press the F5 key to refresh your site? 
	        This tool reloads a web page - but only if one external file was modified.
	      </p>

        <h4>Features</h4>
        <ul>
	        <li>xxx</li>
	      </ul>

        <h4>Installation</h4>
        <p>Drag the following bookmarklet button to your bookmarks toolbar:</p>
        <p><a class="button" href="javascript:(function(win){var%20interval=1000,method=%22Last-Modified%22,title='[F5]%20'+document.title,iframeId='F5Iframe',src=window.location.href,jtabs,F5win,F5WinHead,F5WinBody,iframe,script,getDimentions,setDimentions,scriptText,SBContent,SBMethod,hasInnerText;getDimentions=function(){var%20width,height;if(document.body%20%26%26%20document.body.offsetWidth){width=document.body.offsetWidth;height=document.body.offsetHeight;}if(document.compatMode==='CSS1Compat'%20%26%26%20document.documentElement%20%26%26%20document.documentElement.offsetWidth){width=document.documentElement.offsetWidth;height=document.documentElement.offsetHeight;}if(window.innerWidth%20%26%26%20window.innerHeight){width=window.innerWidth;height=window.innerHeight;}return[width,height];};setDimentions=function(){var%20iframe=F5win.document.getElementById(iframeId),dim=getDimentions();iframe.style.width=dim[0];iframe.style.height=dim[1];};function%20F5(win,iframeId,method,interval){var%20timer,len,checksum,compare,get,getfiles,activate,deactivate,add,addTabs,getScrollXY,_SB_,checksums=[],count=0,pending=false,running=false,files=[];_SB_=function(files){var%20position={top:70,right:0},delay=5,waitBeforeHiding=500,contentWidth=0,labelWidth=35,timer,SB,SBWrapper,SBLabel,SBContentWrapper,SBTitle,label='%26nbsp;%3Cb%3EF5%3C/b%3E%26nbsp;',title='%3Cdiv%20id=%22SBTitle%22%20style=%22margin:0%22%3E%3C/div%3E',content='%3Cdiv%20id=%22SBContent%22%3E%3C/div%3E',divstyle='display:inline-block;color:white;padding:%2010px%205px;',body=document.querySelector('body'),checked=false;function%20setBorderRadius(y,x){var%20radius='5px;';return%20'-webkit-border-'+y+'-'+x+'-radius:%20'+radius+'-moz-border-radius-'+y+x+':%20'+radius+'border-'+y+'-'+x+'-radius:%20'+radius;}function%20setBoxShadow(){var%20boxshadow='-2px%202px%2010px%20%23222;';return%20'-webkit-box-shadow:%20'+boxshadow+'-moz-box-shadow:%20'+boxshadow+'box-shadow:%20'+boxshadow;}function%20newDiv(id){var%20div=document.createElement('div');if(id%20!==null){div.id=id;}return%20div;}function%20slide(num){SBWrapper.style.right=parseInt(SBWrapper.style.right,10)+num+%22px%22;}function%20show(){clearTimeout(timer);if(parseInt(SBWrapper.style.right,10)%3C%200){timer=setTimeout(function(){show();},delay);slide(10);}}function%20moveBack(){clearTimeout(timer);if(parseInt(SBWrapper.style.right,10)%3E%20-%20contentWidth){timer=setTimeout(function(){moveBack();},delay);slide(-10);}}function%20hide(){clearTimeout(timer);timer=setTimeout(function(){moveBack();},waitBeforeHiding);}function%20refreshLayout(){contentWidth=SBWrapper.offsetWidth+15;contentWidth+=(10%20-(contentWidth%2510));SBWrapper.style.width=contentWidth+labelWidth+%22px%22;SBWrapper.style.right=-contentWidth+%22px%22;SBContentWrapper.style.width=contentWidth%20-%20labelWidth+7+%22px%22;SBWrapper.style.visibility=%22visible%22;}function%20change(obj,num){if(!obj.checked){files[num][2]=false;}else{files[num][2]=true;}}function%20toggleAll(){SBContent=document.querySelector('%23SBContent');var%20inputs=SBContent.getElementsByTagName('input'),i=0;checked=checked%3Ffalse:true;for(;i%20%3C%20inputs.length;i+=1){inputs[i].checked=checked;change(inputs[i],i);var%20ext=inputs[i].nextSibling.innerHTML.toLowerCase();if(inputs[i].checked){inputs[i].nextSibling.style.color=%22%23cea500%22;}else{if(inputs.length%20%3E%2010){if(/\.css/.test(ext)){inputs[i].nextSibling.style.color=%22%23DDD%22;}else%20if(/\.js/.test(ext)){inputs[i].nextSibling.style.color=%22%23FFF%22;}else{inputs[i].nextSibling.style.color=%22%23FFFFCC%22;}}else{inputs[i].nextSibling.style.color=%22%23DDD%22;}}}}function%20createSidebarContent(files){var%20i=0,div,span,input,label,select,options,option,para,ext,tabnum;function%20addElement(tagname,parent){parent.appendChild(document.createElement(tagname));}SBContent.innerHTML='';SBTitle=document.querySelector('%23SBTitle');var%20display=files.length%20%3E%2010%3F'tabs':'list';if(display==='tabs'){SBContent.style.width='500px';jtabs.create(['CSS',''],['JavaScript',''],['Images','']).appendTo(SBContent);}var%20tabs=document.querySelectorAll('%23tabContent%20%3E%20div');for(;i%20%3C%20files.length;i+=1){span=document.createElement('span');span.style.cssText=%22display:inline-block;white-space:nowrap;%22;input=document.createElement('input');input.id=%22file_%22+i;input.type=%22checkbox%22;input.value=files[i][1];label=document.createElement('label');label.htmlFor=%22file_%22+i;label.style.cssText=%22cursor:pointer;%20margin-right:12px%22;ext=files[i][1].toLowerCase();if(/\.css/.test(ext)){if(display==='list'){label.style.cssText+=%22color:%23DDD;%22;}tabnum=0;}else%20if(/\.js/.test(ext)){if(display==='list'){label.style.cssText+=%22color:%23FFF%22;}tabnum=1;}else{if(display==='list'){label.style.cssText+=%22color:%23FFFFCC%22;}tabnum=2;}label.innerHTML=files[i][1];span.appendChild(input);span.appendChild(label);if(display==='list'){SBContent.appendChild(span);if(i%20%3C%20files.length%20-%201){addElement('br',SBContent);}}else{tabs[tabnum].appendChild(span);}}para=document.createElement('p');para.style.cssText=%22text-align:right;%20margin:%2010px%200%22;para.innerHTML=''+'%3Ca%20href=%22http://up.github.com/F5/%22%20'+'style=%22'%20+%20'%20background-color:%23666;display:inline-block;padding:2px%204px;'%20+%20'%20color:%23E8E8E8;text-decoration:none;font-size:0.7em;'%20+%20'%22%3EF5%20%40%20github%3C/a%3E';SBContent.appendChild(para);select=document.createElement('select');select.id=%22method%22;select.style.cssText=%22%22;options=[[%22Last-Modified%22,%22Last-Modified%22],[%22Content-Length%22,%22Content-Length%22]];for(i=0;i%20%3C%20options.length;i+=1){option=document.createElement('option');option.value=options[i][0];option.innerHTML=%22Check%20by%20%22+options[i][1];select.appendChild(option);}SBTitle.appendChild(select);if(files.length%20%3C=10){addElement('br',SBTitle);}SBTitle.innerHTML+='%3Cbutton%20onclick=%22F5.toggleAll()%22%3EToggle%3C/button%3E';addElement('br',SBTitle);addElement('br',SBTitle);refreshLayout();}SB=newDiv(null);SB.style.cssText=''+'font-family:arial;'+'position:absolute;'+'right:'+position.right+'px;'+'top:'+position.top+'px;'+'z-index:%201000;';body.appendChild(SB);SBWrapper=newDiv('SBWrapper');SBWrapper.onmouseover=show;SBWrapper.onmouseout=hide;SBWrapper.style.cssText=''+'position:absolute;right:0;top:0;'+'visibility:hidden;';SB.appendChild(SBWrapper);SBLabel=newDiv(null);SBLabel.style.cssText=''+divstyle+setBorderRadius('top','left')+setBorderRadius('bottom','left')+setBoxShadow()+'vertical-align:top;'+'background-color:%23222;';SBLabel.innerHTML=label;SBWrapper.appendChild(SBLabel);SBContentWrapper=newDiv(null);SBContentWrapper.style.cssText=''+divstyle+setBorderRadius('bottom','left')+setBoxShadow()+'padding-top:17px;padding-left:20px;'+'background-color:%23222;';SBContentWrapper.innerHTML=title+content;SBWrapper.appendChild(SBContentWrapper);body.style.overflowX='hidden';createSidebarContent(files);window.F5.toggleAll=toggleAll;window.F5.change=change;};compare=function(){if(files[count][2]%26%26%20arguments[0]){var%20iframe,positions;pending=true;if(checksums[count]===undefined){checksums[count]=checksum;}else%20if(checksums[count]!==checksum){checksums[count]=checksum;iframe=document.getElementById(iframeId);positions=getScrollXY();iframe.contentWindow.location.reload(true);iframe.onload=function(){iframe.contentWindow.scrollTo(positions[0],positions[1]);};}}count++;if(count%20%3C%20len){get();}else{pending=false;count=0;}};getScrollXY=function(){var%20posX=0,posY=0,iframe=document.getElementById(iframeId),iWin=iframe.contentWindow,iDoc=iWin.document,iBody=iDoc.body,iElem=iDoc.documentElement;if(typeof(iWin.pageYOffset)==='number'){posY=iWin.pageYOffset;posX=iWin.pageXOffset;}else%20if(iBody%20%26%26(iBody.scrollLeft%20||%20iBody.scrollTop)){posY=iBody.scrollTop;posX=iBody.scrollLeft;}else%20if(iElem%20%26%26(iElem.scrollLeft%20||%20iElem.scrollTop)){posY=iElem.scrollTop;posX=iElem.scrollLeft;}return[posX,posY];};get=function(){if(files[count][2]){var%20req=new%20XMLHttpRequest();req.onreadystatechange=function(){if(req.readyState===4%20%26%26%20req.status===200){switch(method){case%20%22Last-Modified%22:checksum=req.getResponseHeader(%22Last-Modified%22).toString();break;case%20%22Content-Length%22:checksum=req.getResponseHeader(%22Content-Length%22);break;}compare(true);}};req.open(%22HEAD%22,files[count][0]+%22%3F%22+new%20Date().getTime(),true);req.send(null);}else{compare(false);}};getfiles=function(){var%20i,href,src,iframe=document.getElementById(iframeId),doc=iframe.contentWindow.document,stylesheets=doc.styleSheets,scripts=doc.getElementsByTagName('script'),imgs=doc.getElementsByTagName('img'),img_ext='png%20gif%20svg%20jpg%20jpeg',ext,hash={};for(i=0;i%20%3C%20stylesheets.length;i++){href=stylesheets[i].href;if(href%20!==''%20%26%26%20href%20!==null%20%26%26%20href.substring(href.lastIndexOf('.')+1).toLowerCase()==='css'){add(href);}}for(i=0;i%20%3C%20scripts.length;i++){src=scripts[i].src;if(src%20!==''%20%26%26%20src%20!==null%20%26%26%20src.substring(src.lastIndexOf('.')+1).toLowerCase()==='js'){add(src);}}for(i=0;i%20%3C%20imgs.length;i++){src=imgs[i].src;ext=src.substring(src.lastIndexOf('.')+1).toLowerCase();if(src%20!==''%20%26%26%20img_ext.indexOf(ext)!==-%201){hash[src]=true;}}for(var%20url%20in%20hash){if(hash.hasOwnProperty(url)){add(url);}}return%20files;};activate=function(){addTabs(win);files=getfiles();_SB_(files);len=files.length;timer=win.setInterval(function(){if(!pending){get();}},interval);running=true;};deactivate=function(){win.clearInterval(timer);running=true;};add=function(file){files.push([file,file.substring(file.lastIndexOf('/')+1),false]);};addTabs=function(win){var%20tab_container,iframe=document.getElementById(iframeId),doc=document;function%20newElement(name){return%20doc.createElement(name);}function%20getAll(selector){return%20doc.querySelectorAll(selector);}function%20toggleTabs(tab){var%20i,lis=getAll(%22%23tabs%20li%22),tas=getAll(%22%23tabs%20%23tabContent%20div%22);for(i=0;i%20%3C%20lis.length;i++){lis[i].className=%22%22;}for(i=0;i%20%3C%20tas.length;i++){tas[i].style.display='none';}tab.className=%22selected%22;tas[parseInt(tab.id.substring(3),10)-%201].style.display='block';}function%20createListItem(id,title,sel){var%20li=newElement('li');li.innerHTML=title;li.id=id;li.onclick=function(){toggleTabs(this);};if(sel){li.className=%22selected%22;}return%20li;}function%20addStyleRules(rules){var%20head=doc.getElementsByTagName('head')[0],style=newElement('style');style.type='text/css';if(style.styleSheet){style.styleSheet.cssText=rules;}else{style.appendChild(doc.createTextNode(rules));}head.appendChild(style);}function%20createTabContentWrapper(content,hide){var%20div=newElement('div');div.innerHTML=content;if(hide){div.style.display='none';}return%20div;}function%20appendTo(target){target.appendChild(tab_container);}function%20create(){var%20args=arguments,len=args.length,tab_ul=newElement('ul'),tab_content=newElement('div');tab_container=newElement('div');tab_container.id=%22tabs%22;tab_ul.id=%22sidebarTabs%22;tab_container.appendChild(tab_ul);for(var%20i=0;i%20%3C%20len;i++){tab_ul.appendChild(createListItem('tab'+(i+1),args[i][0],i===0%3Ftrue:false));}tab_content.id=%22tabContent%22;tab_container.appendChild(tab_content);for(i=0;i%20%3C%20len;i++){tab_content.appendChild(createTabContentWrapper(args[i][1],i%20%3E%200%3Ftrue:false));}return%20this;}addStyleRules('%23tabs{%20margin:10px%200%200;%20}'+'%23tabs%20ul%20{%20'+'%20list-style:none;%20display:block;%20overflow:hidden;%20'+'%20margin:0;%20padding:0;%20position:%20relative;%20top:1px;'+'}'+'%23tabs%20li%20{%20'+'%20float:left;%20border:1px%20solid%20%23444;%20padding:5px%208px;%20'+'%20cursor:pointer;%20border-bottom:none;%20margin-right:4px;'+'%20font-family:verdana;%20font-size:.8em;%20font-weight:bold;%20color:%23AAA;%20'+'}'+'%23tabs%20li:hover%20{%20'+'%20background-color:%23333;'+'}'+'%23tabs%20li.selected%20{%20'+'%20background-color:%23444%20!important;%20color:%23cea500;%20font-weight:%20bold;'+'}'+'%23tabs%20%23tabContent%20div%20{%20'+'%20padding:10px;%20color:%23EEE;%20background-color:%23444;%20overflow:hidden;'+'}');win['jtabs']={};win['jtabs']['create']=create;win['jtabs']['appendTo']=appendTo;};win.setTimeout(function(){activate();SBContent.onclick=function(){var%20inputs=SBContent.getElementsByTagName('input'),i=0,ext;for(;i%20%3C%20inputs.length;i+=1){files[i][2]=inputs[i].checked;ext=inputs[i].nextSibling.innerHTML.toLowerCase();if(inputs[i].checked){inputs[i].nextSibling.style.color=%22%23cea500%22;}else{if(/\.css/.test(ext)){inputs[i].nextSibling.style.color=%22%23DDD%22;}else%20if(/\.js/.test(ext)){inputs[i].nextSibling.style.color=%22%23FFF%22;}else{inputs[i].nextSibling.style.color=%22%23FFFFCC%22;}}}};SBMethod=document.querySelector('%23method');SBMethod.onchange=function(){method=this.options[this.selectedIndex].value;};},100);}hasInnerText=(document.getElementsByTagName(%22body%22)[0].innerText%20!==undefined)%3Ftrue:false;scriptText='('+F5.toString()+'(window,%20%22'%20+%20iframeId%20+%20'%22,%20%22'%20+%20method%20+%20'%22,%20'+interval+'));';F5win=window.open();F5WinHead=F5win.document.head;F5WinBody=F5win.document.body;F5WinHead.innerHTML=''+'%3Ctitle%3E'+title+'%3C/title%3E'+'%3Cstyle%3E'+'body{%20margin:0;%20overflow:hidden;}%20'+'iframe{border:none}%20'+'select,%20button%20{margin-left:7px;margin-top:3px;font-size:0.8em;}%20'+'button%20{margin-left:8px;}%20'+'option%20{padding:%202px%203px%200px;}'+'%3C/style%3E';iframe=document.createElement('iframe');iframe.id=iframeId;iframe.src=src;F5WinBody.appendChild(iframe);script=document.createElement('script');script.type=%22text/javascript%22;if(!hasInnerText){script.textContent=scriptText;}else{script.innerText=scriptText;}var%20completeIVal=setInterval(function(){if(iframe.contentWindow.document.readyState==='complete'){F5WinBody.appendChild(script);clearInterval(completeIVal);}},100);setDimentions();if(window.focus){F5win.focus();}F5win.onresize=setDimentions;document.close();F5win.F5={};})(window);">[F5]</a></p>
        <br/>

        <h4>Configuration</h4>
        <p>a) Select the <b>method:</b>
	        <ol>
		        <li>by response header "Last-Modified" (default)</li>
		        <li>by content length</li>
		        <li>by content</li>
		      </ol>
		    </p>
	      <p>b) Pick the <b>interval</b> (in msecs):
	        <ol>
		        <li>1000 (default)</li>
		        <li>2000</li>
		        <li>3000</li>
		        <li>5000</li>
		        <li>10000</li>
		      </ol>
	      </p>
        <p>c) Choose <b>from a list of files</b> which should be tested</p>

        <h4>Similar tools</h4>
        <ul>
	        <li><a href="http://livejs.com/">live.js</a></li>
	      </ul>

      </section>

      <footer>
        <p>This project is maintained by <a href="https://github.com/up">Uli Preuss</a></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>